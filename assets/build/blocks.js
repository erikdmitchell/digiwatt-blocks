(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,a=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.components;(0,a.registerBlockType)("dwb/about-block",{title:(0,t.__)("About","dwb"),icon:"editor-quote",category:"text",attributes:{text:{type:"array",source:"children",selector:"p"},mediaID:{type:"number"},mediaURL:{type:"string"},align:{type:"string"}},supports:{align:["wide","full"]},edit:a=>{const{className:r,attributes:{text:i,mediaID:o,mediaURL:s},setAttributes:c}=a,m=e=>{c({mediaURL:e.url,mediaID:e.id})},d={background:0!=s?'url("'+s+'") no-repeat center center fixed':"none"};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:r},(0,e.createElement)("div",{className:"image-wrap",style:d},(0,e.createElement)(l.MediaUploadCheck,null,(0,e.createElement)(l.MediaUpload,{onSelect:m,allowedTypes:"image",value:o,render:a=>{let{open:l}=a;return(0,e.createElement)(n.Button,{className:o?"image-button":"button button-large",onClick:l},o?"":(0,t.__)("Upload Image","dwb"))}})),0!=o&&(0,e.createElement)(l.MediaUploadCheck,null,(0,e.createElement)(l.MediaUpload,{title:(0,t.__)("Replace image","awp"),value:o,onSelect:m,allowedTypes:["image"],render:a=>{let{open:l}=a;return(0,e.createElement)(n.Button,{onClick:l,isSecondary:!0,className:"replace-image"},(0,t.__)("Replace image","dwb"))}})),0!=o&&(0,e.createElement)(l.MediaUploadCheck,null,(0,e.createElement)(n.Button,{onClick:()=>{c({mediaID:0,mediaURL:""})},isLink:!0,isDestructive:!0,className:"remove-image"},(0,t.__)("Remove image","dwb")))),(0,e.createElement)("div",{className:"about-text-wrap"},(0,e.createElement)("div",{className:"text-inner"},(0,e.createElement)(l.RichText,{tagName:"p",placeholder:(0,t.__)("Sample text","dwb"),value:i,onChange:e=>{c({text:e})}})))))},save:t=>{const{className:a,attributes:{text:n,mediaURL:r}}=t,i={background:0!=r?'url("'+r+'") no-repeat center center fixed':"none"};return(0,e.createElement)("div",{className:a},(0,e.createElement)("div",{className:"image-wrap",style:i}),(0,e.createElement)("div",{className:"about-text-wrap"},(0,e.createElement)("div",{className:"text-inner"},(0,e.createElement)(l.RichText.Content,{tagName:"p",value:n}))))}});const r=window.lodash,i=window.wp.wordcount,o=window.wp.coreData,s=window.wp.data,c=window.wp.date;window.wp.compose,(0,a.registerBlockType)("dwb/post-header",{title:"Post Header",icon:"layout",apiVersion:2,category:"common",attributes:{align:{type:"string",default:"full"},backgroundColor:{type:"string"},featuredImageSizeSlug:{type:"string",default:"digiwatt-home-grid"},featuredImageSizeWidth:{type:"number",default:null},featuredImageSizeHeight:{type:"number",default:null},imageAlign:{type:"string",default:"right"},showAuthor:{type:"boolean",default:!0},textColor:{type:"string"}},supports:{align:["wide","full"],imageAlign:["left","right"]},edit:function(a){let{attributes:i,setAttributes:m}=a;const{className:d,align:u,featuredImageSizeSlug:g,featuredImageSizeWidth:p,featuredImageSizeHeight:b,imageAlign:E,backgroundColor:w,showAuthor:h,textColor:y}=i,{post:v,postID:N,postTitle:_,postAuthorDetails:C,postImage:f}=(0,s.useSelect)((t=>{var a;const{getUser:n,getMedia:i,getEditedEntityRecord:s}=t(o.store),{getSettings:c}=t(l.store),{imageSizes:m,imageDimensions:d}=c(),u=t("core/editor").getCurrentPostId(),E=t("core/editor").getCurrentPostType(),w=s("postType",E,u),h=w.title,y=null===(a=s("postType",E,u))||void 0===a?void 0:a.author,v=i(w.featured_media),N=(0,r.get)(v,["media_details","sizes",g,"source_url"],null),_=null==v?void 0:v.alt_text,C=(0,e.createElement)("img",{src:N,alt:_,style:{maxWidth:p,maxHeight:b}});return{post:w,postID:u,postTitle:h,postAuthorDetails:y?n(y):null,postImage:N?C:null}})),k=Object.keys(v),T=!(null==k||!k.length),x=(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(n.Panel,null,(0,e.createElement)(l.PanelColorSettings,{title:(0,t.__)("Color Settings","dwb"),colorSettings:[{value:y,onChange:e=>{m({textColor:e})},label:(0,t.__)("Text Color")},{value:w,onChange:e=>{m({backgroundColor:e})},label:(0,t.__)("Background Color")}]}),(0,e.createElement)(n.PanelBody,{title:"Image Settings",initialOpen:!0},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.RadioControl,{label:"Alignement",selected:E,options:[{label:"Left",value:"left"},{label:"Right",value:"right"}],onChange:e=>{m({imageAlign:e})}}))),(0,e.createElement)(n.PanelBody,{title:"Misc",initialOpen:!0},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.ToggleControl,{label:"Show Author",checked:h,onChange:e=>{m({showAuthor:e})}})))));if(!T)return(0,e.createElement)("div",null,Array.isArray(v)?(0,t.__)("No post found."):(0,e.createElement)(n.Spinner,null));const R=(0,l.useBlockProps)({style:{color:null!=y?y:"",backgroundColor:null!=w?w:""}}),I=(0,e.createElement)("div",{className:"byline"},(0,e.createElement)("span",{className:"author vcard"},(0,e.createElement)("a",{className:"url fn n",href:C?C.link:"#",rel:"author"},"By ",C?C.name:"")));return(0,e.createElement)(e.Fragment,null,x,(0,e.createElement)("header",R,(0,e.createElement)("div",{className:"columns image-"+E},(0,e.createElement)("div",{className:"column"},(0,e.createElement)("div",{className:"header-content"},(0,e.createElement)("div",{className:"title"},(0,e.createElement)("h1",{className:"entry-title"},_)),(0,e.createElement)("div",{className:"meta"},(0,e.createElement)("div",{className:"entry-date"},(0,e.createElement)("a",{className:"header-link",href:v.link,rel:"bookmark"},(0,e.createElement)("time",{dateTime:(0,c.date)("c",v.date),className:"entry-date"},(0,c.date)("F j, Y",v.date)))),h?I:""))),f?(0,e.createElement)("div",{className:"column"},f):(0,e.createElement)("div",{className:"column no-thumb"}))))}}),(0,a.registerBlockType)("dwb/read-time",{title:"Read Time",icon:"clock",category:"common",attributes:{readTimeText:{type:"string",default:"Minute Read"},timePosition:{type:"string",default:"after"}},edit:function(a){let{attributes:r,setAttributes:c}=a;const{className:m,readTimeText:d,timePosition:u}=r,{post:g}=(0,s.useSelect)((e=>{const{getEntityRecord:t}=e(o.store),a=e("core/editor").getCurrentPostId();return{post:t("postType",e("core/editor").getCurrentPostType(),a)}})),p=(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,t.__)("Read Table","dwb"),icon:"clock"},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.SelectControl,{label:"Time Position",labelPosition:"side",value:r.timePosition,options:[{label:"Before",value:"before"},{label:"After",value:"after"}],onChange:e=>c({timePosition:e})})),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.__experimentalInputControl,{label:"Text",labelPosition:"side",value:r.readTimeText,onChange:e=>c({readTimeText:e})}))));return(0,e.createElement)("div",null,p,(0,e.createElement)("div",{className:m},(()=>{let e=0,t="";null!=g&&(e=(0,i.count)(g.content.raw,"words",{}));const a=Math.ceil(e/200);return t="before"==u?d+" "+a:a+" "+d,t})()))}}),(0,a.registerBlockType)("dwb/tagline-block",{title:(0,t.__)("Tagline","dwb"),icon:"format-status",category:"text",attributes:{title:{type:"array",source:"children",selector:"h1"},mediaID:{type:"number"},mediaURL:{type:"string",source:"attribute",selector:"img",attribute:"src"},bg_color:{type:"string",default:"#8ed2fc"},align:{type:"string"}},supports:{align:["wide","full"]},edit:a=>{const{className:r,attributes:{title:i,mediaID:o,mediaURL:s,bg_color:c},setAttributes:m}=a;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,{key:"setting"},(0,e.createElement)("div",{id:"digiwatt-tagline-controls"},(0,e.createElement)("fieldset",null,(0,e.createElement)("legend",{className:"blocks-base-control__label"},(0,t.__)("Background color","gutenpride")),(0,e.createElement)(l.ColorPalette,{onChange:e=>{m({bg_color:e})}})))),(0,e.createElement)("div",{className:r,style:{backgroundColor:c}},(0,e.createElement)("div",{className:"tagline-wrapper"},(0,e.createElement)(l.MediaUpload,{onSelect:e=>{m({mediaURL:e.url,mediaID:e.id})},allowedTypes:"image",value:o,render:a=>{let{open:l}=a;return(0,e.createElement)(n.Button,{className:o?"image-button":"button button-large",onClick:l},o?(0,e.createElement)("div",{className:"image-wrapper"},(0,e.createElement)("img",{className:"tagline-image",src:s,alt:(0,t.__)("tagline image","dwb")})):(0,t.__)("Upload Image","dwb"))}}),(0,e.createElement)("div",{className:"title-wrap"},(0,e.createElement)(l.RichText,{tagName:"h1",placeholder:(0,t.__)("Tagline","dwb"),value:i,onChange:e=>{m({title:e})}})))))},save:a=>{const{className:n,attributes:{title:r,mediaURL:i,bg_color:o}}=a;return(0,e.createElement)("div",{className:n,style:{backgroundColor:o}},(0,e.createElement)("div",{className:"tagline-wrapper"},i&&(0,e.createElement)("div",{className:"image-wrapper"},(0,e.createElement)("img",{className:"tagline-image",src:i,alt:(0,t.__)("tagline image","dwb")})),(0,e.createElement)("div",{className:"title-wrap"},(0,e.createElement)(l.RichText.Content,{tagName:"h1",value:r}))))}})})();